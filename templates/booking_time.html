{% extends 'base.html' %}
{% block content %}
<a href="/book/employee/{{ date }}/{{ salon.id }}/{{ service.id }}" class="btn btn-outline-secondary mb-3"> Wroc</a>
<h2>Krok 4: Wybierz godzine ({{ date }})</h2>

<div class="card p-4 shadow-sm text-center">
    <h4>{{ service.name }} ({{ service.duration }} min)</h4>
    <p class="text-muted">Pracownik: {{ employee.username }}</p>

    <div class="mt-4">
        {% if slots %}
            <form method="POST" class="d-flex flex-wrap justify-content-center gap-2">
                {% for slot in slots %}
                    <button name="time" value="{{ slot }}" class="btn btn-outline-primary btn-lg px-4">{{ slot }}</button>
                {% endfor %}
            </form>
        {% else %}
            <div class="alert alert-danger">
                 Brak wolnych terminow w dniu {{ date }}.
            </div>
            
            {% if next_available_date %}
                <div class="mt-3">
                    <p class="text-success fw-bold">Znalezlismy wolny termin!</p>
                    <a href="/book/time/{{ next_available_date }}/{{ salon.id }}/{{ service.id }}/{{ employee.id }}" class="btn btn-success btn-lg shadow">
                         Sprawdz termin: {{ next_available_date }}
                    </a>
                </div>
            {% else %}
                <p class="text-muted">Brak terminow w najblizszych 14 dniach.</p>
            {% endif %}
        {% endif %}
    </div>
</div>
{% endblock %}