{% extends 'base.html' %}

{% block content %}
<style>
    .calendar-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); /* TrochÄ™ mniejsze kafelki */
        gap: 8px;
        margin-top: 20px;
    }
    
    .calendar-day-btn {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 6px;
        padding: 10px 2px;
        text-align: center;
        transition: all 0.2s;
        cursor: pointer;
        width: 100%;
        height: 90px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .calendar-day-btn:hover:not(:disabled) {
        background-color: #e9ecef;
        border-color: #adb5bd;
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    /* DziÅ› */
    .day-today {
        border: 2px solid #0d6efd;
        background-color: #f0f8ff;
    }

    /* Weekend */
    .day-weekend {
        background-color: #fff8f8;
        border-color: #f8d7da;
    }
    .day-weekend .day-name { color: #dc3545; }

    /* Dni przeszÅ‚e (zablokowane) */
    .day-past {
        background-color: #e9ecef;
        color: #adb5bd;
        cursor: not-allowed;
        border-color: #dee2e6;
        opacity: 0.6;
    }
    .day-past .day-number, .day-past .day-name { color: #adb5bd; }

    .day-name { font-size: 0.8rem; font-weight: bold; text-transform: uppercase; color: #6c757d; margin-bottom: 2px; }
    .day-number { font-size: 1.5rem; font-weight: 800; color: #212529; line-height: 1; }
</style>

<div class="row align-items-center mb-4">
    <div class="col-md-6">
        <h3>ðŸ“… Wybierz termin</h3>
        <p class="text-muted small mb-0">Wskaz preferowany dzieÅ„ wizyty.</p>
    </div>
    
    <div class="col-md-6 text-end">
        <form method="GET" action="{{ url_for('booking_date') }}">
            <div class="input-group">
                <span class="input-group-text bg-white">MiesiÄ…c:</span>
                <select name="month_select" class="form-select fw-bold border-primary" onchange="window.location.href='?year=' + this.options[this.selectedIndex].getAttribute('data-year') + '&month=' + this.options[this.selectedIndex].getAttribute('data-month')">
                    {% for opt in month_options %}
                        <option 
                            value="" 
                            data-year="{{ opt.value_year }}" 
                            data-month="{{ opt.value_month }}"
                            {% if opt.selected %}selected{% endif %}
                        >
                            {{ opt.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </form>
    </div>
</div>

<form method="POST">
    <div class="calendar-grid">
        {% for day in days %}
            <button 
                name="date" 
                value="{{ day.full_date }}" 
                class="calendar-day-btn 
                       {% if day.is_past %}day-past{% endif %} 
                       {% if day.is_weekend and not day.is_past %}day-weekend{% endif %} 
                       {% if day.is_today %}day-today{% endif %}"
                {% if day.is_past %}disabled{% endif %}
            >
                <span class="day-name">{{ day.day_name }}</span>
                <span class="day-number">{{ day.day_num }}</span>
                
                {% if day.is_today %}
                    <span class="badge bg-primary mt-1" style="font-size: 0.5rem;">DZIÅš</span>
                {% endif %}
            </button>
        {% endfor %}
    </div>
</form>

{% endblock %}